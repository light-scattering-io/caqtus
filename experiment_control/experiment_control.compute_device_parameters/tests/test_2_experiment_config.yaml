!ExperimentConfig
version: 1.0.0
device_servers:
  Elizabeth: !DeviceServerConfiguration
    address: 192.168.137.4
    port: 65000
    authkey: Deardear
  James: !DeviceServerConfiguration
    address: localhost
    port: 65000
    authkey: Deardear
header: !SequenceSteps
  children:
  - !VariableDeclaration
    name: !DottedVariableName 'ramp_time'
    expression: !Expression '80 ms'
  - !VariableDeclaration
    name: !DottedVariableName 'mot_loading.red.power'
    expression: !Expression '0 dB'
  - !VariableDeclaration
    name: !DottedVariableName 'mot_loading.red.frequency'
    expression: !Expression '-3.2 MHz'
  - !VariableDeclaration
    name: !DottedVariableName 'mot_loading.current'
    expression: !Expression '3.6 A'
  - !VariableDeclaration
    name: !DottedVariableName 'mot_loading.blue.power'
    expression: !Expression '100 %'
  - !VariableDeclaration
    name: !DottedVariableName 'mot_loading.blue.frequency'
    expression: !Expression '+19 MHz'
  - !VariableDeclaration
    name: !DottedVariableName 'mot_loading.x_current'
    expression: !Expression '0.47 A'
  - !VariableDeclaration
    name: !DottedVariableName 'mot_loading.y_current'
    expression: !Expression '0 A'
  - !VariableDeclaration
    name: !DottedVariableName 'mot_loading.z_current'
    expression: !Expression '0.3 A'
  - !VariableDeclaration
    name: !DottedVariableName 'red_mot.x_current'
    expression: !Expression '0.266 A'
  - !VariableDeclaration
    name: !DottedVariableName 'red_mot.y_current'
    expression: !Expression '0.1A'
  - !VariableDeclaration
    name: !DottedVariableName 'red_mot.z_current'
    expression: !Expression '-0.12 A'
  - !VariableDeclaration
    name: !DottedVariableName 'red_mot.frequency'
    expression: !Expression '-1.17 MHz'
  - !VariableDeclaration
    name: !DottedVariableName 'red_mot.power'
    expression: !Expression '-36 dB'
  - !VariableDeclaration
    name: !DottedVariableName 'red_mot.current'
    expression: !Expression '1 A'
  - !VariableDeclaration
    name: !DottedVariableName 'push_power'
    expression: !Expression '0.5 mW'
device_configurations:
  Orca Quest: !OrcaQuestCameraConfiguration
    remote_server: Elizabeth
    roi: !RectangularROI
      original_image_size: !tuple
      - 4096
      - 2304
      x: 2016
      width: 128
      y: 1056
      height: 128
    camera_number: 0
  Spincore PulseBlaster sequencer: !SpincoreSequencerConfiguration
    channels:
      - !DigitalChannelConfiguration
        description: !ChannelSpecialPurpose 'NI6738 card'
        output_mapping: !DigitalMapping
          invert: false
        color: null
        delay: 0.0
      - !DigitalChannelConfiguration
        description: !ChannelSpecialPurpose 'Unused'
        output_mapping: !DigitalMapping
          invert: false
        color: [85, 85, 255, 1.0]
        delay: 0.0
      - !DigitalChannelConfiguration
        description: 2D MOT (AOM)
        output_mapping: !DigitalMapping
          invert: false
        color: [85, 85, 255, 1.0]
        delay: 0.0
      - !DigitalChannelConfiguration
        description: !ChannelSpecialPurpose 'MOT camera'
        output_mapping: !DigitalMapping
          invert: false
        color: [70, 130, 180, 0.0]
        delay: 0.0
      - !DigitalChannelConfiguration
        description: 421 cell (AOM)
        output_mapping: !DigitalMapping
          invert: false
        color: [85, 85, 255, 1.0]
        delay: 0.0
      - !DigitalChannelConfiguration
        description: test trigger
        output_mapping: !DigitalMapping
          invert: false
        color: [255, 255, 255, 1.0]
        delay: 0.0
      - !DigitalChannelConfiguration
        description: MOT coils
        output_mapping: !DigitalMapping
          invert: false
        color: [218, 165, 32, 1.0]
        delay: 0.0
      - !DigitalChannelConfiguration
        description: 626 light (AOM)
        output_mapping: !DigitalMapping
          invert: false
        color: [255, 69, 0, 1.0]
        delay: 0.0
      - !DigitalChannelConfiguration
        description: Push beam (shutter)
        output_mapping: !DigitalMapping
          invert: false
        color: [85, 85, 255, 1.0]
        delay: 0.0
      - !DigitalChannelConfiguration
        description: 421 cell vertical (shutter)
        output_mapping: !DigitalMapping
          invert: false
        color: [85, 85, 255, 1.0]
        delay: 0.0
      - !DigitalChannelConfiguration
        description: 421 cell horizontal (shutter)
        output_mapping: !DigitalMapping
          invert: false
        color: [85, 85, 255, 1.0]
        delay: 0.0
      - !DigitalChannelConfiguration
        description: 421 cell vertical (AOM)
        output_mapping: !DigitalMapping
          invert: false
        color: [85, 85, 255, 1.0]
        delay: 0.0
      - !DigitalChannelConfiguration
        description: !ChannelSpecialPurpose 'Orca Quest'
        output_mapping: !DigitalMapping
          invert: false
        color: seashell
        delay: 0.0
      - !DigitalChannelConfiguration
        description: 626 horizontal shutter
        output_mapping: !DigitalMapping
          invert: false
        color: [255, 85, 0, 1.0]
        delay: 0.0
      - !DigitalChannelConfiguration
        description: 532 tweezers (AOM)
        output_mapping: !DigitalMapping
          invert: false
        color: limegreen
        delay: 0.0
      - !DigitalChannelConfiguration
        description: 626 imaging (AOM)
        output_mapping: !DigitalMapping
          invert: false
        color: [255, 85, 0, 1.0]
        delay: 0.0
      - !DigitalChannelConfiguration
        description: 421 cell vertical (EOM)
        output_mapping: !DigitalMapping
          invert: false
        color: [85, 85, 255, 1.0]
        delay: 0.0
      - !DigitalChannelConfiguration
        description: Trap trigger
        output_mapping: !DigitalMapping
          invert: false
        color: [50, 205, 50, 1.0]
        delay: 0.0
      - !DigitalChannelConfiguration
        description: !ChannelSpecialPurpose 'Unused'
        output_mapping: !DigitalMapping
          invert: false
        color: null
        delay: 0.0
      - !DigitalChannelConfiguration
        description: !ChannelSpecialPurpose 'Unused'
        output_mapping: !DigitalMapping
          invert: false
        color: null
        delay: 0.0
      - !DigitalChannelConfiguration
        description: !ChannelSpecialPurpose 'Unused'
        output_mapping: !DigitalMapping
          invert: false
        color: null
        delay: 0.0
      - !DigitalChannelConfiguration
        description: !ChannelSpecialPurpose 'Unused'
        output_mapping: !DigitalMapping
          invert: false
        color: null
        delay: 0.0
      - !DigitalChannelConfiguration
        description: !ChannelSpecialPurpose 'Unused'
        output_mapping: !DigitalMapping
          invert: false
        color: null
        delay: 0.0
      - !DigitalChannelConfiguration
        description: !ChannelSpecialPurpose 'Unused'
        output_mapping: !DigitalMapping
          invert: false
        color: null
        delay: 0.0
    remote_server: James
    board_number: 0
    time_step: 50
  NI6738 card: !NI6738SequencerConfiguration
    channels:
    - !AnalogChannelConfiguration
      description: Tweezers power (AOM)
      output_mapping: !CalibratedAnalogMapping
        input_units: ''
        output_units: V
        measured_data_points:
          - !tuple
            - 0.0
            - -6.0
          - !tuple
            - 0.079
            - -5.0
          - !tuple
            - 0.281
            - -4.0
          - !tuple
            - 0.544
            - -3.0
          - !tuple
            - 0.788
            - -2.0
          - !tuple
            - 0.949
            - -1.0
          - !tuple
            - 1.0
            - 0.0
      color: [85, 255, 0, 1.0]
      delay: 0.0
    - !AnalogChannelConfiguration
        description: MOT coils current
        output_mapping: !CalibratedAnalogMapping
          input_units: A
          output_units: V
          measured_data_points:
            - !tuple
              - 0.0
              - 0.0
            - !tuple
              - 10.0
              - 1.67
        color: [218, 165, 32, 1.0]
        delay: 0.0
    - !AnalogChannelConfiguration
      description: 626 frequency (AOM)
      output_mapping: !CalibratedAnalogMapping
        input_units: MHz
        output_units: V
        measured_data_points:
          - !tuple
            - -20.0
            - -6.0
          - !tuple
            - 20.0
            - 6.0
      color: [255, 85, 0, 1.0]
      delay: 0.0
    - !AnalogChannelConfiguration
      description: 421 cell frequency offset (AOM)
      output_mapping: !CalibratedAnalogMapping
        input_units: MHz
        output_units: V
        measured_data_points:
          - !tuple
            - -40.0
            - -1.0
          - !tuple
            - 40.0
            - 1.0
      color: [85, 85, 255, 1.0]
      delay: 0.0
    - !AnalogChannelConfiguration
      description: Z offset
      output_mapping: !CalibratedAnalogMapping
        input_units: A
        output_units: V
        measured_data_points:
          - !tuple
            - -3.0
            - -10.0
          - !tuple
            - 3.0
            - 10.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: 626 power (AOM)
      output_mapping: !CalibratedAnalogMapping
        input_units: dB
        output_units: V
        measured_data_points:
          - !tuple
            - -68.91
            - 0.0
          - !tuple
            - -67.94
            - 1.0
          - !tuple
            - -54.93
            - 1.5
          - !tuple
            - -48.07
            - 1.6
          - !tuple
            - -43.4
            - 1.7
          - !tuple
            - -33.92
            - 2.0
          - !tuple
            - -25.58
            - 2.5
          - !tuple
            - -20.78
            - 3.0
          - !tuple
            - -14.72
            - 4.0
          - !tuple
            - -10.95
            - 5.0
          - !tuple
            - -8.03
            - 6.0
          - !tuple
            - -5.63
            - 7.0
          - !tuple
            - -3.56
            - 8.0
          - !tuple
            - -1.68
            - 9.0
          - !tuple
            - 0.0
            - 10.0
      color: [255, 85, 0, 1.0]
      delay: 0.0
    - !AnalogChannelConfiguration
      description: X offset
      output_mapping: !CalibratedAnalogMapping
        input_units: A
        output_units: V
        measured_data_points:
          - !tuple
            - 0.0
            - 0.0
          - !tuple
            - 6.0
            - 3.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: Y offset
      output_mapping: !CalibratedAnalogMapping
        input_units: A
        output_units: V
        measured_data_points:
          - !tuple
            - 0.0
            - 0.0
          - !tuple
            - 10.0
            - 5.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: 421 cell power (AOM)
      output_mapping: !CalibratedAnalogMapping
        input_units: dB
        output_units: V
        measured_data_points:
          - !tuple
            - -33.63
            - -0.35
          - !tuple
            - -33.63
            - -0.3
          - !tuple
            - -33.63
            - -0.275
          - !tuple
            - -30.62
            - -0.25
          - !tuple
            - -23.46
            - -0.225
          - !tuple
            - -17.66
            - -0.2
          - !tuple
            - -13.33
            - -0.175
          - !tuple
            - -9.96
            - -0.15
          - !tuple
            - -5.18
            - -0.1
          - !tuple
            - -2.0
            - -0.05
          - !tuple
            - 0.0
            - 0.0
      color: [85, 85, 255, 1.0]
      delay: 0.0
    - !AnalogChannelConfiguration
      description: 421 frequency offset (laser)
      output_mapping: !CalibratedAnalogMapping
        input_units: MHz
        output_units: V
        measured_data_points:
          - !tuple
            - -200.0
            - 6.0
          - !tuple
            - 200.0
            - -6.0
      color: [85, 85, 255, 1.0]
      delay: 0.0
    - !AnalogChannelConfiguration
      description: Push power
      output_mapping: !CalibratedAnalogMapping
        input_units: mW
        output_units: V
        measured_data_points:
          - !tuple
            - 0.0
            - 0.05
          - !tuple
            - 0.7
            - 1.3
      color: [85, 85, 255, 1.0]
      delay: 0.0
    - !AnalogChannelConfiguration
      description: 626 imaging frequency
      output_mapping: !CalibratedAnalogMapping
        input_units: MHz
        output_units: V
        measured_data_points:
          - !tuple
            - -20.0
            - -6.0
          - !tuple
            - 20.0
            - 6.0
      color: [255, 85, 0, 1.0]
      delay: 0.0
    - !AnalogChannelConfiguration
      description: 626 imaging power
      output_mapping: !CalibratedAnalogMapping
        input_units: dB
        output_units: V
        measured_data_points:
          - !tuple
            - -49.0
            - 0.5
          - !tuple
            - -36.0
            - 0.55
          - !tuple
            - -24.0
            - 0.6
          - !tuple
            - -13.0
            - 0.65
          - !tuple
            - -6.6
            - 0.7
          - !tuple
            - -2.0
            - 0.8
          - !tuple
            - -1.0
            - 0.9
          - !tuple
            - 0.0
            - 1.0
      color: [255, 85, 0, 1.0]
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    - !AnalogChannelConfiguration
      description: !ChannelSpecialPurpose 'Unused'
      output_mapping: !CalibratedAnalogMapping
        input_units: V
        output_units: V
        measured_data_points:
          - !tuple
            - -10.0
            - 0.0
          - !tuple
            - 10.0
            - 0.0
      color: null
      delay: 0.0
    remote_server: James
    device_id: Dev1
    time_step: 5000
  MOT camera: !ImagingSourceCameraDMK33GR0134Configuration
    remote_server: James
    roi: !RectangularROI
      original_image_size: !tuple
      - 1280
      - 960
      x: 0
      width: 1280
      y: 0
      height: 960
    camera_name: DMK 33GR0134 6120749
    format: Y800
  Tweezer HWP: !ElliptecELL14RotationStageConfiguration
    remote_server: James
    serial_port: COM9
    device_id: 0
    position: !Expression 'hwp_angle'
optimization_configurations:
  MOT through objective: !OptimizerConfiguration
    description: 'Optimize MOT fluorescence


      Computes the fluorescence with the Orca Quest camera through the microscope.

      It requires two images: a "picture" to which it substracts "background".'
    script_path: !Path 'poetry run python optimize_mot.py'
    parameters: ''
    working_directory: !Path 'C:\Users\James\Desktop\caqtus\analyza\analyza\optimization_scripts'
  tweezers imaging: !OptimizerConfiguration
    description: 'Optimize tweezers signal over noise ratio

      It requires two images: a "picture" to which it substracts "background".'
    script_path: !Path 'poetry run python optimize_tweezer_imaging.py'
    parameters: 2023.03_March.25.tweezer_reference
    working_directory: !Path 'C:\Users\James\Desktop\caqtus\analyza\analyza\optimization_scripts'
mock_experiment: false
